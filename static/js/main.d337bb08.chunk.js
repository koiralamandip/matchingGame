(this.webpackJsonpmatchingGame=this.webpackJsonpmatchingGame||[]).push([[0],{37:function(e,t,s){},38:function(e,t,s){},40:function(e,t,s){},45:function(e,t,s){},65:function(e,t,s){"use strict";s.r(t);var a=s(2),n=s.n(a),c=s(16),r=s.n(c),i=(s(37),s(15)),u=s(10),l=(s(38),s(1)),o=function(e){return Object(l.jsxs)("div",{className:"card","data-value":e.value,"data-index":e.index,onClick:function(t){if(!e.disabled){var s=t.target.parentElement;s.classList.add("visibleState"),e.clickEvent(s)}},children:[Object(l.jsx)("div",{className:"card-down _card",children:Object(l.jsx)("span",{children:"*"})}),Object(l.jsx)("div",{className:"card-up _card",children:e.value})]})},d=(s(40),s(9)),j=function(e){return Object(l.jsxs)("div",{className:"entry",children:[Object(l.jsxs)("div",{className:"user-entry-name",children:[e.user.name," ",e.you?"(You)":""]}),Object(l.jsxs)("div",{className:"highscore-container",children:[Object(l.jsx)("div",{className:"highscore-entry title sub",children:"All Time Score"}),Object(l.jsxs)("div",{className:"highscore-entry score",children:[e.user.score.high," steps only"]})]})]})},b=(s(45),function(e){for(var t=e.length;t>0;t--){var s=Math.floor(Math.random()*t),a=t-1,n=e[a];e[a]=e[s],e[s]=n}return e}),h=function(e){return Array.from(Array(e*e).keys())},p=function(e){var t=e%60,s=Math.floor(e/60);return(s<=9?"0"+s:s)+":"+(t<=9?"0"+t:t)},O=function(e){var t,s=Object(a.useRef)(null),n=Object(d.c)((function(e){return e.userState}));return Object(l.jsx)("div",{className:e.visible?"overlay show":"overlay",ref:s,children:Object(l.jsxs)("div",{className:"highscore",children:[Object(l.jsxs)("div",{className:"tbar",children:[Object(l.jsx)("div",{className:"title tbar-title",children:"Highscores"}),Object(l.jsx)("button",{className:"asLink title sub",onClick:e.callback,children:"Close"})]}),Object(l.jsxs)("div",{className:"users-score-list",children:[Object(l.jsx)("div",{className:"sub",children:"Note: Players with no gameplay aren't listed here"}),(t=n.users,t.sort((function(e,t){return e.score.high-t.score.high}))).map((function(e){return e.gameplay>0&&Object(l.jsx)(j,{user:e,you:e.id===n.currentUser.id})}))]})]})})},f=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),s=t[0],n=t[1],c=Object(a.useState)(!1),r=Object(u.a)(c,2),i=r[0],o=r[1],j=Object(d.c)((function(e){return e.userState})),b=Object(d.b)();Object(a.useEffect)((function(){b({type:"FETCH_USER"})}),[]);var h=function(e){var t=e.target.dataset.userId;b({type:"SET_CURRENT_USER",payload:j.users.find((function(e){return e.id===t}))})},p=function(){o(!i)};return Object(l.jsxs)("div",{className:"right-screen",children:[Object(l.jsx)(O,{visible:i,callback:p}),Object(l.jsxs)("div",{className:"current-user-section",children:[Object(l.jsx)("div",{className:"title",children:"Currently playing as:"}),Object(l.jsx)("div",{className:"user-name",children:j.currentUser.name}),Object(l.jsxs)("div",{className:"all-time",children:[Object(l.jsx)("span",{className:"title sub",children:"All Time Score"}),Object(l.jsxs)("span",{className:"data",children:[j.currentUser.score.high," steps ",8===j.currentUser.score.high?"(TOP)":""]})]}),Object(l.jsxs)("div",{className:"last-time",children:[Object(l.jsx)("span",{className:"title sub",children:"On Last Session"}),Object(l.jsxs)("span",{className:"data",children:[j.currentUser.score.last," steps ",8===j.currentUser.score.last?"(TOP)":""]})]}),Object(l.jsxs)("div",{className:"gameplay",children:[Object(l.jsx)("span",{className:"title sub",children:"Gameplay"}),Object(l.jsxs)("span",{className:"data",children:[j.currentUser.gameplay," times "]})]})]}),Object(l.jsxs)("div",{className:"register-form-section",children:[Object(l.jsx)("span",{className:"title sub asLink",onClick:p,children:"Highscores"}),Object(l.jsx)("div",{className:"title",children:"Register as New"}),Object(l.jsxs)("form",{className:"title",method:"post",onSubmit:function(e){e.preventDefault(),""!==s?b({type:"ADD_USER",payload:{name:s,score:{high:0,last:0},gameplay:0}}):alert("Can't add user without name")},children:[Object(l.jsx)("input",{type:"text",name:"name",placeholder:"Username",onChange:function(e){return n(e.target.value)}}),Object(l.jsx)("button",{type:"submit",className:"title asLink sub",children:"Register"})]})]}),Object(l.jsxs)("div",{className:"other-section",children:[Object(l.jsx)("div",{className:"title sub",children:"Or, Play as an existing User"}),Object(l.jsx)("div",{className:"user-list",children:Array.from(j.users).map((function(e){return Object(l.jsx)("div",{className:"a sub","data-user-id":e.id,onClick:h,children:e.name})}))})]})]})},m=function(){var e=Object(a.useState)((function(){return b(h(4))})),t=Object(u.a)(e,2),s=t[0],n=t[1],c=Object(a.useState)(0),r=Object(u.a)(c,2),j=r[0],O=r[1],m=Object(a.useState)(0),v=Object(u.a)(m,2),x=v[0],g=v[1],y=Object(a.useState)(!1),N=Object(u.a)(y,2),E=N[0],S=N[1],k=Object(a.useState)([]),C=Object(u.a)(k,2),U=C[0],w=C[1],R=Object(a.useState)([]),T=Object(u.a)(R,2),_=T[0],L=T[1],A=Object(d.c)((function(e){return e})).userState,D=Object(d.b)(),P=function(){U.forEach((function(e){e.classList.remove("matched"),e.classList.remove("visibleState")})),_.forEach((function(e){e.classList.remove("visibleState")})),n(b(h(4))),g(0),L([]),w([]),E&&S(!1),O(0)},B=function(e){1===_.length?L((function(t){return[].concat(Object(i.a)(t),[e])})):L([e])};return Object(a.useEffect)((function(){U.length===s.length&&(S(!1),D({type:"UPDATE_SCORE_DB",payload:{last:x,user:A.currentUser}}),alert("Congratulation, you found the matches in "+x+" steps in "+p(j)+" s"))}),[U]),Object(a.useEffect)((function(){document.getElementsByClassName("main-container")[0].style.gridTemplateColumns="repeat("+Math.sqrt(s.length)+", auto)"}),[s.length]),Object(a.useEffect)((function(){2===_.length&&(g((function(e){return e+1})),_[0].dataset.value===_[1].dataset.value?(_.forEach((function(e){e.classList.add("matched")})),w((function(e){return e.concat(_)}))):setTimeout((function(){_.forEach((function(e){return e.classList.toggle("visibleState")}))}),500))}),[_]),Object(a.useEffect)((function(){var e;return document.getElementsByClassName("start")[0].disabled=E,E?e=setInterval((function(){O((function(e){return e+1}))}),1e3):clearInterval(e),function(){return clearInterval(e)}}),[E]),Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("div",{className:"left-screen",children:Object(l.jsxs)("div",{className:"main-container",children:[Object(l.jsxs)("div",{className:"info",children:[Object(l.jsxs)("div",{className:"stopwatch",children:["Time",Object(l.jsxs)("span",{className:"stopwatch-value value",children:[" ",p(j)," "]})]}),Object(l.jsxs)("div",{className:"steps",children:["Steps",Object(l.jsxs)("span",{className:"step-value value",children:[" ",x," "]})]})]}),Object(l.jsxs)("div",{className:"controls",children:[Object(l.jsx)("div",{className:E?"startWrapper":"startWrapper start-active",children:Object(l.jsx)("button",{className:"start title sub asLink",onClick:function(){U.length===s.length&&P(),S(!0)},children:"Start"})}),Object(l.jsx)("button",{className:"reset title sub asLink",onClick:P,children:"Reset and Reshuffle"})]}),s.map((function(e){return Object(l.jsx)(o,{index:e,value:(e+1)%Math.floor(s.length/2),clickEvent:B,disabled:!E})}))]})}),Object(l.jsx)(f,{})]})},v=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,66)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;s(e),a(e),n(e),c(e),r(e)}))},x=s(12),g=s(32),y=s(13),N={users:[],currentUser:{name:"Guest",id:"1",score:{high:0,last:0},gameplay:0}},E=Object(x.b)({userState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_USER":return Object(y.a)(Object(y.a)({},e),{},{users:[].concat(Object(i.a)(e.users),Object(i.a)(t.payload))});case"SET_CURRENT_USER":case"UPDATE_CURRENT_SCORE":return Object(y.a)(Object(y.a)({},e),{},{currentUser:t.payload});default:return e}}}),S=s(19),k=s(5),C=s.n(k),U=s(20),w=s.n(U),R=s(8),T=C.a.mark(F),_=C.a.mark(I),L=C.a.mark(M),A=C.a.mark(W),D=C.a.mark(q),P=C.a.mark(Y),B=C.a.mark(z);function F(){var e;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(R.b)(G);case 3:return e=t.sent,t.next=6,Object(R.a)([Object(R.c)({type:"SET_CURRENT_USER",payload:e.find((function(e){return"1"===e.id}))}),Object(R.c)({type:"LOAD_USER",payload:e})]);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),T,null,[[0,8]])}function I(e){var t;return C.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,Object(R.b)(H,e.payload);case 3:return t=s.sent,s.next=6,Object(R.c)({type:"LOAD_USER",payload:[t]});case 6:s.next=10;break;case 8:s.prev=8,s.t0=s.catch(0);case 10:case"end":return s.stop()}}),_,null,[[0,8]])}function M(e){var t;return C.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,Object(R.b)(J,e.payload);case 3:return t=s.sent,s.next=6,Object(R.c)({type:"UPDATE_CURRENT_SCORE",payload:t});case 6:s.next=10;break;case 8:s.prev=8,s.t0=s.catch(0);case 10:case"end":return s.stop()}}),L,null,[[0,8]])}var G=function(){var e=Object(S.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("http://localhost:3002/user?_sort=score[high]&_order=asc",{headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(S.a)(C.a.mark((function e(t){var s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("http://localhost:3002/user",t,{headers:{"Content-Type":"application/json"}});case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(S.a)(C.a.mark((function e(t){var s,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.user.score.high,t.user.score.last=t.last,(0===t.user.gameplay||s>t.last)&&(t.user.score.high=t.last),t.user.gameplay=t.user.gameplay+1,e.next=6,w.a.put("http://localhost:3002/user/".concat(t.user.id),t.user,{headers:{"Content-Type":"application/json"}});case 6:return a=e.sent,e.abrupt("return",a.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function W(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.d)("FETCH_USER",F);case 2:case"end":return e.stop()}}),A)}function q(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.d)("ADD_USER",I);case 2:case"end":return e.stop()}}),D)}function Y(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.d)("UPDATE_SCORE_DB",M);case 2:case"end":return e.stop()}}),P)}function z(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.a)([W(),q(),Y()]);case 2:case"end":return e.stop()}}),B)}var K=Object(g.a)(),Q=Object(x.d)(E,Object(x.a)(K));K.run(z),r.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(d.a,{store:Q,children:Object(l.jsx)(m,{})})}),document.getElementById("root")),v()}},[[65,1,2]]]);
//# sourceMappingURL=main.d337bb08.chunk.js.map
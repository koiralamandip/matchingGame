(this.webpackJsonpmatchingGame=this.webpackJsonpmatchingGame||[]).push([[0],{37:function(e,t,a){},38:function(e,t,a){},40:function(e,t,a){},45:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var s=a(2),n=a.n(s),c=a(16),r=a.n(c),i=(a(37),a(15)),u=a(10),l=(a(38),a(1)),o=function(e){return Object(l.jsxs)("div",{className:"card","data-value":e.value,"data-index":e.index,onClick:function(t){if(!e.disabled){var a=t.target.parentElement;a.classList.add("visibleState"),e.clickEvent(a)}},children:[Object(l.jsx)("div",{className:"card-down _card",children:Object(l.jsx)("span",{children:"*"})}),Object(l.jsx)("div",{className:"card-up _card",children:e.value})]})},d=(a(40),a(9)),j=function(e){return Object(l.jsxs)("div",{className:"entry",children:[Object(l.jsxs)("div",{className:"user-entry-name",children:[e.user.name," ",e.you?"(You)":""]}),Object(l.jsxs)("div",{className:"highscore-container",children:[Object(l.jsx)("div",{className:"highscore-entry title sub",children:"All Time Score"}),Object(l.jsxs)("div",{className:"highscore-entry score",children:[e.user.score.high," steps only"]})]})]})},b=(a(45),function(e){for(var t=e.length;t>0;t--){var a=Math.floor(Math.random()*t),s=t-1,n=e[s];e[s]=e[a],e[a]=n}return e}),h=function(e){return Array.from(Array(e*e).keys())},p=function(e){var t=e%60,a=Math.floor(e/60);return(a<=9?"0"+a:a)+":"+(t<=9?"0"+t:t)},m=function(e){var t,a=Object(s.useRef)(null),n=Object(d.c)((function(e){return e.userState}));return Object(l.jsx)("div",{className:e.visible?"overlay show":"overlay",ref:a,children:Object(l.jsxs)("div",{className:"highscore",children:[Object(l.jsxs)("div",{className:"tbar",children:[Object(l.jsx)("div",{className:"title tbar-title",children:"Highscores"}),Object(l.jsx)("button",{className:"asLink title sub",onClick:e.callback,children:"Close"})]}),Object(l.jsxs)("div",{className:"users-score-list",children:[Object(l.jsx)("div",{className:"sub",children:"Note: Players with no gameplay aren't listed here"}),(t=n.users,t.sort((function(e,t){return e.score.high-t.score.high}))).map((function(e){return e.gameplay>0&&Object(l.jsx)(j,{user:e,you:e.id===n.currentUser.id})}))]})]})})},O=function(){var e=Object(s.useState)(""),t=Object(u.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(!1),r=Object(u.a)(c,2),i=r[0],o=r[1],j=Object(d.c)((function(e){return e.userState})),b=Object(d.b)();Object(s.useEffect)((function(){b({type:"FETCH_USER"})}),[]);var h=function(e){var t=e.target.dataset.userId;b({type:"SET_CURRENT_USER",payload:j.users.find((function(e){return e.id===t}))})},p=function(){o(!i)};return Object(l.jsxs)("div",{className:"right-screen",children:[Object(l.jsx)(m,{visible:i,callback:p}),Object(l.jsxs)("div",{className:"current-user-section",children:[Object(l.jsx)("div",{className:"title",children:"Currently playing as:"}),Object(l.jsx)("div",{className:"user-name",children:j.currentUser.name}),Object(l.jsxs)("div",{className:"all-time",children:[Object(l.jsx)("span",{className:"title sub",children:"All Time Score"}),Object(l.jsxs)("span",{className:"data",children:[j.currentUser.score.high," steps ",8===j.currentUser.score.high?"(TOP)":""]})]}),Object(l.jsxs)("div",{className:"last-time",children:[Object(l.jsx)("span",{className:"title sub",children:"On Last Session"}),Object(l.jsxs)("span",{className:"data",children:[j.currentUser.score.last," steps ",8===j.currentUser.score.last?"(TOP)":""]})]}),Object(l.jsxs)("div",{className:"gameplay",children:[Object(l.jsx)("span",{className:"title sub",children:"Gameplay"}),Object(l.jsxs)("span",{className:"data",children:[j.currentUser.gameplay," times "]})]})]}),Object(l.jsxs)("div",{className:"register-form-section",children:[Object(l.jsx)("span",{className:"title sub asLink",onClick:p,children:"Highscores"}),Object(l.jsx)("div",{className:"title",children:"Register as New"}),Object(l.jsxs)("form",{className:"title",method:"post",onSubmit:function(e){e.preventDefault(),""!==a?b({type:"ADD_USER",payload:{name:a,score:{high:0,last:0},gameplay:0}}):alert("Can't add user without name")},children:[Object(l.jsx)("input",{type:"text",name:"name",placeholder:"Username",onChange:function(e){return n(e.target.value)}}),Object(l.jsx)("button",{type:"submit",className:"title asLink sub",children:"Register"})]})]}),Object(l.jsxs)("div",{className:"other-section",children:[Object(l.jsx)("div",{className:"title sub",children:"Or, Play as an existing User"}),Object(l.jsx)("div",{className:"user-list",children:Array.from(j.users).map((function(e){return Object(l.jsx)("div",{className:"a sub","data-user-id":e.id,onClick:h,children:e.name})}))})]})]})},f=function(){var e=Object(s.useState)((function(){return b(h(4))})),t=Object(u.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(0),r=Object(u.a)(c,2),j=r[0],m=r[1],f=Object(s.useState)(0),v=Object(u.a)(f,2),x=v[0],g=v[1],y=Object(s.useState)(!1),N=Object(u.a)(y,2),S=N[0],E=N[1],k=Object(s.useState)([]),C=Object(u.a)(k,2),U=C[0],w=C[1],R=Object(s.useState)([]),T=Object(u.a)(R,2),_=T[0],L=T[1],A=Object(d.c)((function(e){return e})).userState,D=Object(d.b)(),P=function(){U.forEach((function(e){e.classList.remove("matched"),e.classList.remove("visibleState")})),_.forEach((function(e){e.classList.remove("visibleState")})),n(b(h(4))),g(0),L([]),w([]),S&&E(!1),m(0)},B=function(e){1===_.length?L((function(t){return[].concat(Object(i.a)(t),[e])})):L([e])};return Object(s.useEffect)((function(){U.length===a.length&&(E(!1),D({type:"UPDATE_SCORE_DB",payload:{last:x,user:A.currentUser}}),alert("Congratulation, you found the matches in "+x+" steps in "+p(j)+" s"))}),[U]),Object(s.useEffect)((function(){document.getElementsByClassName("main-container")[0].style.gridTemplateColumns="repeat("+Math.sqrt(a.length)+", auto)"}),[a.length]),Object(s.useEffect)((function(){2===_.length&&(g((function(e){return e+1})),_[0].dataset.value===_[1].dataset.value?(_.forEach((function(e){e.classList.add("matched")})),w((function(e){return e.concat(_)}))):setTimeout((function(){_.forEach((function(e){return e.classList.toggle("visibleState")}))}),500))}),[_]),Object(s.useEffect)((function(){var e;return document.getElementsByClassName("start")[0].disabled=S,S?e=setInterval((function(){m((function(e){return e+1}))}),1e3):clearInterval(e),function(){return clearInterval(e)}}),[S]),Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("div",{className:"left-screen",children:Object(l.jsxs)("div",{className:"main-container",children:[Object(l.jsxs)("div",{className:"info",children:[Object(l.jsxs)("div",{className:"stopwatch",children:["Time",Object(l.jsxs)("span",{className:"stopwatch-value value",children:[" ",p(j)," "]})]}),Object(l.jsxs)("div",{className:"steps",children:["Steps",Object(l.jsxs)("span",{className:"step-value value",children:[" ",x," "]})]})]}),Object(l.jsxs)("div",{className:"controls",children:[Object(l.jsx)("div",{className:S?"startWrapper":"startWrapper start-active",children:Object(l.jsx)("button",{className:"start title sub asLink",onClick:function(){U.length===a.length&&P(),E(!0)},children:"Start"})}),Object(l.jsx)("button",{className:"reset title sub asLink",onClick:P,children:"Reset and Reshuffle"})]}),a.map((function(e){return Object(l.jsx)(o,{index:e,value:(e+1)%Math.floor(a.length/2),clickEvent:B,disabled:!S})}))]})}),Object(l.jsx)(O,{})]})},v=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,66)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),c(e),r(e)}))},x=a(12),g=a(32),y=a(13),N={users:[],currentUser:{name:"Guest",id:"1",score:{high:0,last:0},gameplay:0}},S=Object(x.b)({userState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_USER":return Object(y.a)(Object(y.a)({},e),{},{users:[].concat(Object(i.a)(e.users),Object(i.a)(t.payload))});case"SET_CURRENT_USER":case"UPDATE_CURRENT_SCORE":return Object(y.a)(Object(y.a)({},e),{},{currentUser:t.payload});default:return e}}}),E=a(19),k=a(5),C=a.n(k),U=a(20),w=a.n(U),R=a(8),T=C.a.mark(F),_=C.a.mark(I),L=C.a.mark(M),A=C.a.mark(W),D=C.a.mark(q),P=C.a.mark(Y),B=C.a.mark(z);function F(){var e;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(R.b)(J);case 3:return e=t.sent,t.next=6,Object(R.a)([Object(R.c)({type:"SET_CURRENT_USER",payload:e.find((function(e){return"1"===e.id}))}),Object(R.c)({type:"LOAD_USER",payload:e})]);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),T,null,[[0,8]])}function I(e){var t;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(R.b)(G,e.payload);case 3:return t=a.sent,a.next=6,Object(R.c)({type:"LOAD_USER",payload:[t]});case 6:a.next=10;break;case 8:a.prev=8,a.t0=a.catch(0);case 10:case"end":return a.stop()}}),_,null,[[0,8]])}function M(e){var t;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(R.b)(H,e.payload);case 3:return t=a.sent,a.next=6,Object(R.c)({type:"UPDATE_CURRENT_SCORE",payload:t});case 6:a.next=10;break;case 8:a.prev=8,a.t0=a.catch(0);case 10:case"end":return a.stop()}}),L,null,[[0,8]])}var J=function(){var e=Object(E.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("https://my-json-server.typicode.com/koiralamandip/matchingJSON/user?_sort=score[high]&_order=asc",{headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(E.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("https://my-json-server.typicode.com/koiralamandip/matchingJSON/user",t,{headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(E.a)(C.a.mark((function e(t){var a,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.user.score.high,t.user.score.last=t.last,(0===t.user.gameplay||a>t.last)&&(t.user.score.high=t.last),t.user.gameplay=t.user.gameplay+1,e.next=6,w.a.put("https://my-json-server.typicode.com/koiralamandip/matchingJSON/user/".concat(t.user.id),t.user,{headers:{"Content-Type":"application/json"}});case 6:return s=e.sent,e.abrupt("return",s.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function W(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.d)("FETCH_USER",F);case 2:case"end":return e.stop()}}),A)}function q(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.d)("ADD_USER",I);case 2:case"end":return e.stop()}}),D)}function Y(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.d)("UPDATE_SCORE_DB",M);case 2:case"end":return e.stop()}}),P)}function z(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.a)([W(),q(),Y()]);case 2:case"end":return e.stop()}}),B)}var K=Object(g.a)(),Q=Object(x.d)(S,Object(x.a)(K));K.run(z),r.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(d.a,{store:Q,children:Object(l.jsx)(f,{})})}),document.getElementById("root")),v()}},[[65,1,2]]]);
//# sourceMappingURL=main.d9f6b571.chunk.js.map